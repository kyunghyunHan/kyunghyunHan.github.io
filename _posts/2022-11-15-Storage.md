---
layout: post
title: "스토리지 - Storage"
subtitle: "블록체인 로드맵 - Storage"
date: 2022-11-15 17:23:00
author: "Hebi"
header-img: "img/블록체인.png"
header-mask: 0.3
catalog: true
tags:
  - Blockchain
  - web3
  - RoadMap
  - Storage
---

> 블록체인을 학습

# Storage

- **블록체인 스토리지**는 분산 네트워크에 데이터를 저장하는 방식으로, 전 세계 사용자의 미사용 하드 디스크 공간을 활용하여 파일을 저장
- 분산형 인프라 는 중앙 집중식 클라우드 스토리지 의 대안 이며 중앙 집중식 시스템에서 발견되는 많은 문제를 해결할수 있다.

## 블록체인 스토리지 작동 방식

- 블록체인 은 **분산 원장 기술( DLT )** 에 의존한다.
- **DLT**는 다양한 당사자 간의 거래에 대한 정보의 분산 데이터베이스 역할을 한다.
- 작업은 DLT를 시간 순서대로 채우고 일련의 블록으로 원장에 저장한다.
- 블록 사이에 상호 연결된 체인이 형성되고 각 블록이 이전 블록을 참조하여 블록체인이 생성한다.
- 블록체인 스토리지에서 파일은 먼저 **샤딩( sharding )**이라는 프로세스에서 분리된다.
- 각 샤드는 전송 중에 오류가 발생할 경우 데이터 손실을 방지 하기 위해 복사된다.
- 파일은 또한 네트워크의 다른 노드 에서 볼 수 없도록 개인 키로 암호화되며 ,복제된 샤드는 전 세계의 분산된 노드에 분산된다.
- **상호 작용**은 블록체인 원장에 기록되어 시스템이 블록체인의 노드에서 트랜잭션을 확인하고 동기화할수 있다.
- **블록체인 스토리지**는 이러한 상호 작용을 영원히 저장하도록 설계되었으며 데이터는 절대 변경할수 없다.

## 블록체인 스토리지 대 클라우드 스토리지

- **블록체인 스토리지**는 중앙 집중식 클라우드 스토리지 에 대한 잠재적으로 더 저렴하고 안전하며 안정적인 대안이다.
- 중앙 집중식 클라우드 스토리지 제공업체는 데이터의 복사본을 만들어 다른 데이터 센터에 저장하여 데이터 손실을 방지한다.
- 이 과정에서 중복되는 많은 양의 데이터는 과도한 양의 잉여 정보를 생성할 수 있다.
- 또한 클라우드 스토리지에는 데이터 센터 용 엔터프라이즈급 하드웨어가 필요하다.
- 이러한 요인으로 인해 중앙 집중식 데이터 저장소가 블록체인 저장소보다 훨씬 더 비쌀 수 있다.
- **블록체인 스토리지**는 전 세계 사용자 장치의 빈 공간을 활용하여 중앙 집중식 클라우드 스토리지 비용의 최대 90%를 절감할 수 있다고 지지자들은 주장한다.
- 개인과 기업은 하드 디스크의 미사용 공간을 다른 사람이 사용할 수 있도록 임대함으로써 이익을 얻을수 있다.

## 블록체인 스토리지의 장점

- 파일을 암호화하고 분산 네트워크에 배포하면 해커 가 데이터에 액세스하기가 더 어려워 진다.
- 파일에 대한 액세스를 제어하거나 파일을 해독하는데 필요한 키를 소유하는 중앙 엔티티가 없다.
- 개인키는 전적으로 사용자에 의해 제어하므로 제3자가 파일에 엑세스 하는 것은 이론적으로 불가능 하다.
- 또한 **샤딩**은 각 노드가 전체 파일의 내용을 볼수 없도록 하여 더많은 개인정보를 제공한다.
- **블록체인 스토리지**는 또한 사용자가 검색 속도 및 중복성과 같은 설정을 조작할수 있기 떄문에 더 빠르고 사용자 정의 가능한 스토리지 시스템을 허용할수 있다.

## IPFS

- **IPFS**는 피어 투 피어(p2p) 스토리지 네트워크이다.
- 콘텐츠는 정보를 전달하거나 저장하거나 둘 다 수행할 수 있는 전 세계 어디에나 있는 피어를 통해 액세스할수 있다.
- **IPFS**는 위치가 아닌 콘텐츠 주소를 사용하여 요청한 내용을 찾는 방법을 알고 있다.

## IPFS작동방식

- **IPFS에 업로드된 파일**은 더 작은 청크로 분할되고 여러 컴퓨터에 배포되며 사용자가 찾을 수 있도록 해시를 할당한다.
- **IPFS 링크**는 일반 웹과 같은 친숙한 위치 기반 링크를 사용하는 대신 각 항목의 고유한 해시 식별자를 기반으로 한다.
- 이를 통해 파일 또는 웹 사이트가 있는 노드 또는 노드를 찾는 데 도움이 된다
- **BitTorrent 기술**과 유사한 피어 투 피어 연결을 통해 사용자에게 제공된다.

## DHT

- 찾고 있는 콘텐츠를 호스팅하는 피어를 찾기 위해( 검색 ) **IPFS는 분산 해시 테이블 또는 DHT를 사용한다.**
- **해시 테이블**은 값에 대한 키의 데이터베이스이다.
- 부하가 집중되지 않고 분산되기 때문에, 극단적으로 큰 규모의 노드도 관리 가능하다.
- 수십억개의 노드를 P2P 상에서 검색범위로 할 수 있다.
- content-addressed : 컨텐츠 자체가 주소 역할을 한다.

## merkle DAG

- **Merkle DAG**는 각 노드에 식별자가 있는 DAG이며, 이는 SHA256과 같은 암호화 해시 함수를 사용하여 노드의 콘텐츠를 해싱한 결과이다.
- **Merkle DAG**는 Merkle 트리와 유사하지만 균형 요구 사항이 없으며 모든 노드가 페이로드를 수행할 수 있다. DAG에서는 여러 분기가 다시 수렴할 수 있습니다. 즉, **노드에 여러 부모가 있을 수 있다**,
- **Merkle DAG**는 자체 검증된 구조이다. 노드의 CID는 해당 페이로드의 내용과 모든 하위 항목의 내용에 일관되게 연결된다. 따라서 동일한 CID를 가진 두 노드는 정확히 동일한 DAG를 일의적으로 나타낸다.
- **모든 컨텐츠는 그 자체가 링크**이며, multihash checksum으로 무결성 확인이 가능하다.
- 모든 컨텐츠는 자체적으로 checksum으로 무결성을 확인할 수 있고, 위변조시 merkle root의 해시값이 변경되기 때문에 **IPFS 자체적으로 탐지 가능**

## Bitswap

- **Bitswap**은 데이터 블록을 교환하기 위한 IPFS의 핵심 모듈이다.
- 네트워크의 다른 피어와의 블록 요청 및 전송을 지시한다.
- **하나의 파일을 여러 조각**으로 나누어, 각 노드끼리 자신이 갖고 있는 조각의 정보를 알려주고 다른 노드들에게 자신이 필요한 조각을 요청할수 있다.
